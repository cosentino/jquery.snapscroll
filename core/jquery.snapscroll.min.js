(function(){!function($,window,document){var Plugin,defaults,pluginName;return pluginName="snapscroll",defaults={botPadding:40,topPadding:40,scrollSpeed:300,scrollEndSpeed:100,excludeSelector:!1},Plugin=function(element,options){return this.container=$(element),this.options=$.extend({},defaults,options),this.init()},Plugin.prototype={init:function(){return this.snapping()},snapping:function(){var $children,autoscrolling,prev_position,scroll_end_speed,scroll_speed,timer,_this=this;return $children=this.container.children(),this.options.excludeSelector&&($children=$children.not(this.options.excludeSelector)),scroll_speed=this.options.scrollSpeed,scroll_end_speed=this.options.scrollEndSpeed,prev_position=$(document).scrollTop(),timer=null,autoscrolling=!1,$(window).off("scroll.snapscroll").on("scroll.snapscroll",function(){var $child,cur_position,direction;return autoscrolling?void 0:(cur_position=$(document).scrollTop(),direction=_this.getDirection(prev_position,cur_position),$child=_this.getTargetChild($children,direction,cur_position),$child&&(clearTimeout(timer),timer=setTimeout(function(){return $(window).trigger("snapscrollBefore",$child).scrollTo($child,{duration:scroll_speed,onAfter:function(){return $(window).trigger("snapscrollAfter",$child)}}),$child.siblings(".ss-active").removeClass("ss-active"),$child.addClass("ss-active"),autoscrolling=!0,setTimeout(function(){return prev_position=$(document).scrollTop(),autoscrolling=!1},scroll_speed+20)},scroll_end_speed)),prev_position=cur_position)})},getDirection:function(a,b){return a>b?"up":"down"},getTargetChild:function($children,direction,position){var $target,bottom_position,fc_top,lc_bottom,options,window_height;return options=this.options,window_height=$(window).height(),bottom_position=position+window_height,fc_top=$children.first().offset().top,lc_bottom=$children.last().offset().top+window_height,$target=null,fc_top<position+options.topPadding&&$children.not(".ss-active").each(function(){var object_bot,object_top;if(object_top=$(this).offset().top,object_bot=object_top+$(this).height(),"down"===direction){if(bottom_position>object_top&&object_bot>position)return $target=$(this),!1}else if(position>object_top&&object_bot>position)return $target=$(this)}),$target}},$.fn[pluginName]=function(options){return this.each(function(){return $.data(this,"plugin_"+pluginName)?void 0:$.data(this,"plugin_"+pluginName,new Plugin(this,options))})}}(jQuery,window,document)}).call(this);